# Quest 15. 자동화된 테스트

# 1. 자동화된 테스트를 만드는 것에는 어떤 장점과 단점이 있을까요?

**장점**

- 테스트 케이스를 꼼꼼하게 작성하면 변경한 부분에 대해 어디까지 영향을 끼치는지 쉽게 파악할 수 있다.
- 테스트 케이스를 바탕으로 리팩토링을 진행하면 명확하게 어느 부분이 문제가 되는지 알 수 있기 때문에 안정성있게 작성할 수 있다.
- 협업 시 코드 컨벤션, 스타일, 표준 등을 공유하기에 유리하다.
- 테스트 케이스 작성과 개발을 분담하여 테스트 케이스 작성하 사람의 설계를 공유하면서 개발에 더욱 집중할 수 있게 해준다.

<br />

**단점**

- 경험이 없는 경우 테스트 케이스 작성에 대해 확신이 없거나 어떻게 작성해야 할지 몰라 익숙해지기까지 시간이 걸린다. → 결국 기존보다 개발 시간이 늘어날 수 있다.

<br />

## 1-1) TDD(Test-Driven Development)란 무엇인가요? TDD의 장점과 단점은 무엇일까요?

- TDD(Test-Driven Development): 테스트 주도 개발, 테스트가 개발을 이끌어 나가는 것.
    - 테스트를 먼저 만들고, 테스트를 통과하기 위한 것을 짜는 것.
    - 테스트 작성 → 통과하는 코드 작성 → 피드백의 반복

<br />

**장점**

- 테스트 케이스가 저장되고, 저장된 내용들은 남들에게 공유되거나 피드백을 받을 수 있는 좋은 수단이 된다.
- 불확실성이 높을 때 피드백과 협력을 통해 더 좋은 결과를 내는 것이 매우 중요한데, TDD를 통해서 피드백과 협력을 증진시켜준다.
- 코드의 결함이 줄어든다.
- 유지보수 비용이 낮아진다.

<br />

**단점**

- TDD를 하지 않을 때와 비교해 개발 시간이 조금이나마 늘어난다.
- TDD를 한 번도 적용하지 않았던 개발자는 기존의 개발 방식을 많이 바꿔야 하므로 도입에 어려움이 있을 수 있다.

<br />

# 2. 테스트들 간의 계층에 따라 어떤 단계들이 있을까요?

- 계층 아래에서부터 Unit Test → Integration Test → E2E Test 가 있다.

<br />

## 2-1) 유닛 테스트, 통합 테스트, E2E 테스트는 각각 어떤 것을 뜻하나요?

1) 유닛 테스트(Unit Test)

- 특정 클래스나 메서드의 기능을 테스트하는 또 다른 메서드이다.
- 단일 클래스, 메서드, 함수를 대상으로 테스트를 진행한다.
- 상대적으로 유지 보수에 용이하고 테스트 속도가 빠르다.

<br />

2) 통합 테스트(Integration Test)

- 컴포넌트 전체를 테스트한다.
- 여기서 컴포넌트는 여러 클래스, 함수, 메서드, 모듈, 시스템의 일부나 어플리케이션 전체가 될 수 있다.
- 어떤 이슈는 통합 테스트를 통해서만 발견될 수도 있다.
    - 기본 로직에서부터 모듈, API 인터페이스, 성능, 보안 등

<br />

3) E2E 테스트(End to End Test)

- 사용자의 입장에서 사용하는 상황을 가정하고 테스트 하는 것.
- 사용자에게 직접적으로 노출되는 부분을 점검한다.
- REST API를 테스트하기 위해 서버에 요청을 보낸 뒤 클라이언트에서 원하는 데이터가 전송되는지 확인하는 등

<br />

## 2-2) 테스트에 있어서 Stub과 Mock은 어떤 개념을 가리키는 것일까요?

- **stub**
    - 호출이되면 미리 준비된 답변으로 응답하는 것.
    - 테스트시에 프로그램된 것 외에는 응답하지 않는다.
    - 협력 객체의 특정 부분이 테스트하기 힘들 경우 stub을 사용하면 수월하게 테스트할 수 있다.

<br />

- **mock**
    - 호출에 대한 기대를 명세하고, 해당 내용에 따라 동작하도록 프로그래밍 된 객체.
    - 다른 테스트더블과는 다르게 행위검증 사용을 추구한다.

<br />

# 3. Jest는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?

- Facebook에서 개발한 테스트 프레임워크로 코드가 제대로 동작하는지 확인하는 테스트 케이스를 만든다.
- 여러가지 상황을 설정하고, 그 상황에 맞는 결과가 나오는지 테스트한다.

```jsx
// sum.js
function sum(a, b) {
	return a + b;
}

export default sum;

// sum.test.js
test("adds 1 + 2 to equal 3", () => {
	expect(sum(1, 2)).toBe(3);
});
```

<br />

# 4. Puppeteer는 어떤 일을 하며 어떻게 사용하는 테스트 프레임워크일까요?

- 구글 크롬의 DevTools Protocol을 통해 chrome 또는 chromium을 제어하도록 도와주는 라이브러리이다.
- Puppeteer를 통해
    - SPA 화면의 렌더링이 가능하다
    - 렌더링후 키보드, 마우스 입력 제어할 수 있다.
    - 웹페이지의 자동 테스트 도구를 만들 수 있다.
    - 각각의 웹페이지 crawling 이 가능하다.
    - 접속한 페이지를 스크린샷을 찍거나 PDF 으로 만들 수 있다.